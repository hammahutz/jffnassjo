---
import PageLayout from "../layout/PageLayout.astro";

const pageTitle = "Hem";
const allPosts = await Astro.glob("./posts/*.md");

allPosts.sort(
  (a, b) => Date.parse(b.frontmatter.date) - Date.parse(a.frontmatter.date)
);

allPosts.forEach(p => {
  if (p.frontmatter.images <= 0) {
    p.frontmatter.images = [{url:"/favicon.svg", alt:"jff logotyp"}]
  }
});

---

<PageLayout pageTitle={pageTitle}>
  <div class="container card-grid">
    {
      allPosts.map((post) => (
        <div class="card-size card">
          <a class="card-img-link" href={post.url}>
            <img
              class="card-img-top img-size"
              src={post.frontmatter.images[0]?.url}
              alt={post.frontmatter.images[0]?.alt}
            />
          </a>
          <div class="card-body card-flex">
            <h2 class="card-title">{post.frontmatter.title}</h2>
            <p class="card-text">{post.frontmatter.description}</p>
            <p class="card-text date">{post.frontmatter.date.slice(0, 10)}</p>
            <a class="btn btn-primary read-more-btn" href={post.url}>
              LÃ¤s mer
            </a>
          </div>
        </div>
      ))
    }
  </div>
</PageLayout>
