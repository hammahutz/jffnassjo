---
import Carousel from "../components/Carousel/Carousel";
import PageLayout from "./PageLayout.astro";

const { frontmatter } = Astro.props;

const postImages = frontmatter.images.map((i) => ({ src: i.src, alt: i.alt }));
const headerImage = postImages.shift() ?? { src: "/favicon.svg", alt: "jff logotyp" };
---

<PageLayout pageTitle={frontmatter.title}>
  <article class="flex flex-col gap-16 w-full py-4">
    <div class="header w-full flex flex-col items-center">
      <a class="w-fit" href={headerImage?.src}>
        <img src={headerImage?.src} alt={headerImage?.alt} />
      </a>
      <p class="italic">{frontmatter.description}</p>
    </div>
    <div class="content flex flex-col gap-4">
      <slot />
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {
          postImages?.map((image) => (
            <a href={image.src} >
              <img src={image.src} alt={image.alt} />
            </a>
          ))
        }
      </div>
    </div>
    <Carousel client:only images={postImages} />

    <div class="bottom italic">
      <p>
        Skriven av {frontmatter.author}
      </p>
      <p>
        {frontmatter.date.slice(0, 10)}
      </p>
      <a class="btn btn-primary" href="/">Tillbaka</a>
    </div>
  </article>
</PageLayout>
